<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Employee</title>
    <link rel="stylesheet" href="AddEmployeeStyle.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>

<div class="container">
    <!-- Sidebar Navigation -->
    <div class="navigation">
        <ul>
            <li>
                <a href="index.html">
                    <span class="icon"><span class="material-icons">dashboard</span></span>
                    <span class="title">Dashboard</span>
                </a>
            </li>
            <li><a href="sales.html"><span class="icon"><span class="material-icons">shopping_cart</span></span><span class="title">Sales</span></a></li>
          <li><a href="inventory.html"><span class="icon"><span class="material-icons">inventory</span></span><span class="title">Inventory</span></a></li>
          <li><a href="attendance.html"><span class="icon"><span class="material-icons">event</span></span><span class="title">Attendance</span></a></li>
          <li><a href="employee_attendance.html"><span class="icon"><span class="material-icons">schedule</span></span><span class="title">Employee Attendance</span></a></li>
          <li><a href="add_employee.html"><span class="icon"><span class="material-icons">person_add</span></span><span class="title">Add Employee</span></a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main">
        <div class="topbar">
            <div class="toggle">
                <span class="material-icons">menu</span>
            </div>
        </div>

        <div class="form-container">
            <h2>Add Employee</h2>
            <form id="addEmployeeForm">
                <div class="input-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" placeholder="Enter full name" required>
                </div>

                <div class="input-group">
                    <label for="birthday">Birthday</label>
                    <input type="date" id="birthday" required>
                </div>

                <div class="input-group">
                    <label for="contact">Contact Number</label>
                    <input type="tel" id="contact" placeholder="Enter contact number" required>
                </div>

                <div class="input-group">
                    <label for="employeeType">Employee Type</label>
                    <select id="employeeType" required>
                        <option value="">Select Employee Type</option>
                        <option value="Manager">Manager</option>
                        <option value="Cashier">Cashier</option>
                        <option value="Sales Attendant">Sales Attendant</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Set username" required>
                </div>

                <div class="input-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Set password" required>
                </div>

                <button type="submit" class="submit-btn">Add Employee</button>
            </form>
        </div>
    </div>
</div>

<script src="script.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Ensure user is logged in
        if (localStorage.getItem("loggedIn") !== "true") {
            window.location.href = "index.html";
        }

        // Get the logged-in user's role
        const userRole = localStorage.getItem("userRole");

        // Restrict access to non-admins
        if (userRole !== "admin") {
            alert("Access Denied: Only admins can add employees.");
            window.location.href = "dashboard.html"; // Redirect unauthorized users
        }

        // Handle form submission
        document.getElementById("addEmployeeForm").addEventListener("submit", function (event) {
            event.preventDefault();

            let name = document.getElementById("name").value.trim();
            let birthday = document.getElementById("birthday").value;
            let contact = document.getElementById("contact").value.trim();
            let employeeType = document.getElementById("employeeType").value;
            let username = document.getElementById("username").value.trim();
            let password = document.getElementById("password").value.trim();

            if (!name || !birthday || !contact || !employeeType || !username || !password) {
                alert("Please fill in all fields.");
                return;
            }

            // Get existing employees from localStorage
            let employees = JSON.parse(localStorage.getItem("employees")) || [];

            // Check if username already exists
            if (employees.some(emp => emp.username === username)) {
                alert("Username already exists. Please choose a different one.");
                return;
            }

            // Add new employee
            employees.push({ name, birthday, contact, employeeType, username, password });
            localStorage.setItem("employees", JSON.stringify(employees));

            alert("Employee added successfully!");
            document.getElementById("addEmployeeForm").reset(); // Reset form
        });
    });
</script>


</body>
</html>
